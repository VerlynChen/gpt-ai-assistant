name: Keep Render Alive

# é˜²æ­¢ Render å…è²»ç‰ˆæœå‹™ä¼‘çœ 
# Render å…è²»ç‰ˆæœƒåœ¨ 15 åˆ†é˜ç„¡æ´»å‹•å¾Œä¼‘çœ 
# æ­¤ workflow æ¯ 10 åˆ†é˜ ping ä¸€æ¬¡å¥åº·æª¢æŸ¥ç«¯é»

on:
  schedule:
    # æ¯ 10 åˆ†é˜åŸ·è¡Œä¸€æ¬¡ (cron æ ¼å¼ï¼šåˆ† æ™‚ æ—¥ æœˆ é€±)
    # */10 è¡¨ç¤ºæ¯ 10 åˆ†é˜
    - cron: '*/10 * * * *'
  
  # å…è¨±æ‰‹å‹•è§¸ç™¼ï¼ˆåœ¨ GitHub Actions é é¢å¯ä»¥æ‰‹å‹•åŸ·è¡Œï¼‰
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping Health Endpoint
        run: |
          echo "ğŸ“ Pinging health endpoint..."
          response=$(curl -s -o /dev/null -w "%{http_code}" https://gpt-ai-assistant-99gv.onrender.com/health)
          echo "ğŸ“Š Response code: $response"
          
          if [ "$response" -eq 200 ]; then
            echo "âœ… Service is alive!"
          else
            echo "âš ï¸ Service returned status code: $response"
            exit 1
          fi
      
      - name: Log Timestamp
        run: |
          echo "â° Pinged at: $(date)"
          echo "ğŸŒ Timezone: $(date +%Z)"


# LINE 文字格式轉換指南

## 🎨 GPT Markdown → LINE 格式

系統會自動將 GPT 的 Markdown 格式轉換成 LINE 可顯示的格式。

---

## 📝 轉換規則

### 1. 粗體 (Bold)

**GPT 輸出**：
```markdown
這是**重要內容**
這是__粗體文字__
```

**LINE 顯示**：
```
這是【重要內容】
這是【粗體文字】
```

### 2. 標題 (Headers)

**GPT 輸出**：
```markdown
# 一級標題
## 二級標題
### 三級標題
```

**LINE 顯示**：
```
▸▸▸ 一級標題
▸▸ 二級標題
▸ 三級標題
```

### 3. 列表 (Lists)

**GPT 輸出**：
```markdown
- 項目一
- 項目二
* 項目三

1. 第一點
2. 第二點
```

**LINE 顯示**：
```
• 項目一
• 項目二
• 項目三

1. 第一點
2. 第二點
```

### 4. 程式碼 (Code)

**GPT 輸出**：
````markdown
這是 `inline code` 範例

```python
def hello():
    print("Hello")
```
````

**LINE 顯示**：
```
這是「inline code」範例

「
def hello():
    print("Hello")
」
```

### 5. 連結 (Links)

**GPT 輸出**：
```markdown
[點擊這裡](https://example.com)
```

**LINE 顯示**：
```
點擊這裡 (https://example.com)
```

### 6. 分隔線 (Horizontal Rules)

**GPT 輸出**：
```markdown
---
***
```

**LINE 顯示**：
```
─────────
─────────
```

---

## 🎯 實際範例

### 範例 1：場地推薦

**GPT 回應**：
```markdown
## 婚禮場地推薦

以下是**適合 100 人**的場地選項：

- **戶外花園**：自然浪漫
- **飯店宴會廳**：氣派豪華
- **教堂**：莊嚴神聖

預算參考：
1. 戶外花園：`NT$80,000-120,000`
2. 飯店宴會廳：`NT$120,000-200,000`

更多資訊請參考：[官方網站](https://example.com)
```

**LINE 顯示**：
```
▸▸ 婚禮場地推薦

以下是【適合 100 人】的場地選項：

• 【戶外花園】：自然浪漫
• 【飯店宴會廳】：氣派豪華
• 【教堂】：莊嚴神聖

預算參考：
1. 戶外花園：「NT$80,000-120,000」
2. 飯店宴會廳：「NT$120,000-200,000」

更多資訊請參考：官方網站 (https://example.com)
```

### 範例 2：預算分析

**GPT 回應**：
```markdown
### 婚禮預算建議

**總預算**：NT$300,000

主要支出：
- 場地費用（40%）
- 餐飲費用（30%）
- 婚紗攝影（20%）
- 其他費用（10%）

---

**建議**：預留 `10-15%` 的彈性預算
```

**LINE 顯示**：
```
▸ 婚禮預算建議

【總預算】：NT$300,000

主要支出：
• 場地費用（40%）
• 餐飲費用（30%）
• 婚紗攝影（20%）
• 其他費用（10%）

─────────

【建議】：預留「10-15%」的彈性預算
```

---

## 🛠️ 自訂格式

### 修改符號

編輯 `utils/convert-text.js`：

```javascript
// 修改粗體符號（默認：【】）
converted = converted.replace(/\*\*(.+?)\*\*/g, '＊$1＊');  // 改用全形星號

// 修改標題符號（默認：▸）
converted = converted.replace(/^##\s+(.+)$/gm, '★ $1');  // 改用星星

// 修改列點符號（默認：•）
converted = converted.replace(/^[\-\*]\s+(.+)$/gm, '→ $1');  // 改用箭頭

// 修改程式碼符號（默認：「」）
converted = converted.replace(/`([^`]+)`/g, '『$1』');  // 改用『』
```

### 停用格式轉換

如果您想保留原始 Markdown 格式：

編輯 `utils/convert-text.js`：

```javascript
const convertText = (text) => {
  // 註解掉這行，跳過格式轉換
  // let converted = convertMarkdownToLine(text);
  let converted = text;  // 直接使用原始文字
  
  // 繁簡轉換仍會執行
  if (config.APP_LANG === 'zh_TW') {
    const converter = OpenCC.Converter({ from: 'cn', to: 'tw' });
    return converter(converted);
  }
  // ...
};
```

---

## 🎨 推薦的符號選擇

### 粗體符號選項

| 符號 | 範例 | 視覺效果 |
|------|------|----------|
| 【】 | 【重要】 | ✅ 推薦（預設）|
| 《》 | 《重要》 | ✅ 清楚 |
| ＊＊ | ＊重要＊ | ⭐ 顯眼 |
| ▸▸ | ▸重要▸ | ⭐ 現代感 |

### 列點符號選項

| 符號 | 視覺效果 |
|------|----------|
| • | ✅ 推薦（預設）|
| ● | ✅ 清楚 |
| ◆ | ⭐ 特別 |
| → | ⭐ 箭頭 |
| ✓ | ⭐ 勾選 |

### 標題符號選項

| 符號 | 視覺效果 |
|------|----------|
| ▸ | ✅ 推薦（預設）|
| ★ | ⭐ 星星 |
| ➤ | ⭐ 箭頭 |
| ◆ | ⭐ 菱形 |
| 【】 | ⭐ 括號 |

---

## 💡 最佳實踐

### 1. 在 OpenAI Assistant 的 Instructions 中建議格式

```
回答時請使用 Markdown 格式：
- 重要內容用 **粗體**
- 使用列表整理要點
- 適當使用標題分段
```

### 2. 避免過度格式化

❌ **不好的例子**：
```markdown
**這**是**一**個**過度**格式化的**範例**
```

✅ **好的例子**：
```markdown
這是一個適當的範例，**重點突出**即可
```

### 3. 使用適當的標題層級

```markdown
## 主要標題（二級）
### 次要標題（三級）

避免使用一級標題（#），因為它太顯眼
```

---

## 🔍 測試轉換

### 測試範例

在 LINE 發送：
```
請用 Markdown 格式回答：推薦 3 個婚禮場地
```

GPT 應該回應類似：
```markdown
## 婚禮場地推薦

以下是**精選場地**：

1. **海邊花園**
   - 景色優美
   - 適合 `50-100` 人

2. **城堡莊園**
   - 歐式建築
   - 預算：`NT$200,000+`
```

LINE 會顯示為：
```
▸▸ 婚禮場地推薦

以下是【精選場地】：

1. 【海邊花園】
   • 景色優美
   • 適合「50-100」人

2. 【城堡莊園】
   • 歐式建築
   • 預算：「NT$200,000+」
```

---

## 🎯 進階：使用 LINE Flex Message

如果需要更豐富的格式（如真正的粗體、顏色），可以使用 LINE Flex Message。

這需要：
1. 解析 Markdown
2. 轉換為 Flex Message JSON
3. 修改 `app/messages/` 來支援 Flex

不過對於大多數使用場景，目前的符號轉換已經足夠清楚易讀。

---

## ✅ 總結

**已自動轉換的格式**：
- ✅ 粗體：`**text**` → `【text】`
- ✅ 標題：`## title` → `▸▸ title`
- ✅ 列表：`- item` → `• item`
- ✅ 程式碼：`` `code` `` → `「code」`
- ✅ 連結：`[text](url)` → `text (url)`
- ✅ 分隔線：`---` → `─────────`

**現在就能使用**：
- 無需任何額外設定
- 自動處理所有 GPT 回應
- 在 LINE 上清楚易讀

**自訂方式**：
- 編輯 `utils/convert-text.js`
- 修改符號或正則表達式
- 或完全停用轉換

享受更好的 LINE 閱讀體驗！ 🎉

